
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NUSAMEDIA - Portal Berita Terkini</title>
    <link rel="icon" type="image/x-icon" href="logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .news-card:hover { transform: translateY(-2px); transition: all 0.3s ease; }
        .breaking-news { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        .modal { display: none; }
        .modal.active { display: flex; }
        .drag-over { border-color: #3b82f6; background-color: #eff6ff; }
        .image-preview { position: relative; }
        .image-preview:hover .delete-btn { opacity: 1; }
        .delete-btn { opacity: 0; transition: opacity 0.3s; }
        .admin-controls { display: none; }
        .admin-controls.show { display: flex; }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <!-- Top Bar -->
            <div class="flex justify-between items-center py-2 text-sm text-gray-600 border-b">
                <div class="flex items-center space-x-4">
                    <span><i class="far fa-calendar"></i> Senin, 23 Desember 2024</span>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="#" class="hover:text-blue-600 text-xs">Tentang Kami</a>
                    <a href="#" class="hover:text-blue-600 text-xs">Box Redaksi</a>
                    <a href="#" class="hover:text-blue-600 text-xs">Kontak Kami</a>
                    <a href="#" class="hover:text-blue-600 text-xs">Pedoman Cyber</a>
                    <a href="#" class="hover:text-blue-600 text-xs">SOP Wartawan</a>
                    <a href="#" class="hover:text-blue-600 text-xs">Kode Etik</a>
                </div>
            </div>
            
            <!-- Main Header -->
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <svg width="48" height="48" viewBox="0 0 48 48" class="mr-3">
                            <img src="logo.png" width="48" height="48" margin="0px 10px">
                        </svg>
                    <h1 class="text-3xl font-bold text-red-600">NUSAMEDIA</h1>
                    <span class="ml-2 text-sm text-gray-500">Portal Berita Terpercaya</span>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" placeholder="Cari berita..." class="pl-10 pr-4 py-2 border rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    
                    <!-- Admin Controls -->
                    <button id="loginBtn" class="bg-green-600 text-white px-4 py-2 rounded-full hover:bg-green-700 transition">
                        <i class="fas fa-user-shield"></i> Login Admin
                    </button>
                    
                    <div id="adminControls" class="admin-controls items-center space-x-3">
                        <button id="addNewsBtn" class="bg-blue-600 text-white px-4 py-2 rounded-full hover:bg-blue-700 transition">
                            <i class="fas fa-plus"></i> Tambah Berita
                        </button>
                        <button id="logoutBtn" class="bg-red-600 text-white px-4 py-2 rounded-full hover:bg-red-700 transition">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                    
                    <button class="bg-blue-600 text-white px-4 py-2 rounded-full hover:bg-blue-700 transition">
                        <i class="fas fa-bell"></i>
                    </button>
                </div>
            </div>
            
            <!-- Navigation -->
            <nav class="py-3 border-t">
                <ul class="flex space-x-8 text-sm font-medium">
                    <li><a href="#" onclick="filterByCategory('all')" class="nav-link text-blue-600 border-b-2 border-blue-600 pb-2">Beranda</a></li>
                    <li><a href="#" onclick="filterByCategory('Umum')" class="nav-link text-gray-700 hover:text-blue-600 pb-2">Umum</a></li>
                    <li><a href="#" onclick="filterByCategory('Politik')" class="nav-link text-gray-700 hover:text-blue-600 pb-2">Politik</a></li>
                    <li><a href="#" onclick="filterByCategory('Ekonomi')" class="nav-link text-gray-700 hover:text-blue-600 pb-2">Ekonomi</a></li>
                    <li><a href="#" onclick="filterByCategory('Olahraga')" class="nav-link text-gray-700 hover:text-blue-600 pb-2">Olahraga</a></li>
                    <li><a href="#" onclick="filterByCategory('Teknologi')" class="nav-link text-gray-700 hover:text-blue-600 pb-2">Teknologi</a></li>
                    <li><a href="#" onclick="filterByCategory('Hiburan')" class="nav-link text-gray-700 hover:text-blue-600 pb-2">Hiburan</a></li>
                    <li><a href="#" onclick="filterByCategory('Pendidikan')" class="nav-link text-gray-700 hover:text-blue-600 pb-2">Pendidikan</a></li>
                </ul>
            </nav>
        </div>
    </header>



    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Left Content -->
            <div class="lg:col-span-3">
                <!-- Dynamic News Container -->
                <section id="newsContainer" class="mb-8">
                    <!-- News will be dynamically inserted here -->
                </section>

                <!-- All News Section -->
                <section id="allNewsSection" class="mb-8">
                    <div class="flex items-center justify-between mb-6">
                        <h2 id="sectionTitle" class="text-2xl font-bold text-gray-900">Semua Berita</h2>
                        <button id="showAllBtn" class="text-blue-600 hover:text-blue-800 font-medium">Lihat Semua â†’</button>
                    </div>
                    
                    <div id="allNews" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- News will be dynamically inserted here -->
                    </div>
                </section>
            </div>

            <!-- Sidebar -->
            <aside class="lg:col-span-1">
                <!-- Trending -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                        <i class="fas fa-fire text-red-500 mr-2"></i>Trending
                    </h3>
                    <div class="space-y-3">
                        <div class="flex items-start space-x-3">
                            <span class="bg-red-600 text-white text-xs font-bold px-2 py-1 rounded">1</span>
                            <div>
                                <h4 class="text-sm font-semibold text-gray-900 hover:text-blue-600 cursor-pointer">
                                    Harga BBM Turun Mulai Januari 2025
                                </h4>
                                <span class="text-xs text-gray-500">15.2k pembaca</span>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="bg-orange-600 text-white text-xs font-bold px-2 py-1 rounded">2</span>
                            <div>
                                <h4 class="text-sm font-semibold text-gray-900 hover:text-blue-600 cursor-pointer">
                                    Gempa 7.2 SR Guncang Maluku Utara
                                </h4>
                                <span class="text-xs text-gray-500">12.8k pembaca</span>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="bg-yellow-600 text-white text-xs font-bold px-2 py-1 rounded">3</span>
                            <div>
                                <h4 class="text-sm font-semibold text-gray-900 hover:text-blue-600 cursor-pointer">
                                    Artis Hollywood Kunjungi Bali
                                </h4>
                                <span class="text-xs text-gray-500">9.5k pembaca</span>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- Newsletter -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">Newsletter</h3>
                    <p class="text-sm text-gray-600 mb-4">Dapatkan berita terbaru langsung di email Anda</p>
                    <form class="space-y-3">
                        <input type="email" placeholder="Email Anda" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">
                            Berlangganan
                        </button>
                    </form>
                </div>
            </aside>
        </div>
    </main>

    <!-- Login Modal -->
    <div id="loginModal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">Login Administrator</h2>
                <button id="closeLoginModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Username</label>
                    <input type="text" id="username" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                    <input type="password" id="password" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">
                    Login
                </button>
            </form>
        </div>
    </div>

    <!-- Add/Edit News Modal -->
    <div id="newsModal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 id="modalTitle" class="text-2xl font-bold text-gray-900">Tambah Berita Baru</h2>
                <button id="closeNewsModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form id="newsForm">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">Kategori *</label>
                        <select id="newsCategory" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                            <option value="">Pilih Kategori</option>
                            <option value="Umum">Umum</option>
                            <option value="Politik">Politik</option>
                            <option value="Ekonomi">Ekonomi</option>
                            <option value="Olahraga">Olahraga</option>
                            <option value="Teknologi">Teknologi</option>
                            <option value="Hiburan">Hiburan</option>
                            <option value="Pendidikan">Pendidikan</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">Status</label>
                        <select id="newsStatus" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="published">Publikasikan</option>
                            <option value="draft">Simpan Draft</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Judul Berita *</label>
                    <input type="text" id="newsTitle" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Masukkan judul berita yang menarik..." required>
                </div>

                <div class="mt-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Upload Media (Gambar & Video)</label>
                    <div id="imageUpload" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 transition cursor-pointer">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-2">Klik untuk upload atau drag & drop media</p>
                        <p class="text-sm text-gray-500">Gambar: PNG, JPG, GIF | Video: MP4, MOV, AVI hingga 50MB</p>
                        <input type="file" id="imageInput" multiple accept="image/*,video/*" class="hidden">
                    </div>
                    
                    <div id="imagePreview" class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 hidden">
                        <!-- Image previews will be inserted here -->
                    </div>
                    
                    <div id="imageActions" class="mt-4 flex justify-between items-center hidden">
                        <span id="imageCount" class="text-sm text-gray-600"></span>
                        <div class="space-x-2">
                            <button type="button" id="addMoreImages" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition">
                                <i class="fas fa-plus"></i> Tambah Lagi
                            </button>
                            <button type="button" id="clearAllImages" class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition">
                                <i class="fas fa-trash"></i> Hapus Semua
                            </button>
                        </div>
                    </div>
                </div>

                <div class="mt-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Isi Berita *</label>
                    <textarea id="newsContent" rows="10" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Tulis isi berita lengkap di sini..." required></textarea>
                    <div class="flex justify-between items-center mt-2">
                        <span id="charCount" class="text-sm text-gray-500">0 karakter</span>
                        <span class="text-sm text-gray-500">Tulis berita selengkap mungkin</span>
                    </div>
                </div>

                <div class="flex justify-end space-x-4 mt-8">
                    <button type="button" id="cancelNews" class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                        Batal
                    </button>
                    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                        <i class="fas fa-paper-plane mr-2"></i>Publikasikan
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- News Detail Modal -->
    <div id="newsDetailModal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50">
        <div class="bg-white rounded-lg max-w-4xl w-full mx-4 max-h-screen overflow-y-auto">
            <div id="newsDetailContent">
                <!-- News detail content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="text-center">
                <i class="fas fa-exclamation-triangle text-red-500 text-6xl mb-4"></i>
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Konfirmasi Hapus</h2>
                <p class="text-gray-600 mb-6">Apakah Anda yakin ingin menghapus berita ini? Tindakan ini tidak dapat dibatalkan.</p>
                <div class="flex justify-center space-x-4">
                    <button id="cancelDelete" class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                        Batal
                    </button>
                    <button id="confirmDelete" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
                        Ya, Hapus
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4 text-red-600">NUSAMEDIA</h3>
                    <p class="text-gray-400 text-sm mb-4">Portal berita terpercaya yang menyajikan informasi akurat dan terkini untuk masyarakat Indonesia.</p>
                    <div class="flex space-x-3 flex-wrap">
                        <a href="https://web.facebook.com/profile.php?id=61576225011346" class="bg-blue-600 p-2 rounded hover:bg-blue-700 transition mb-2">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="https://www.tiktok.com/@nusamedianews" class="bg-gray-800 p-2 rounded hover:bg-gray-700 transition mb-2">
                            <i class="fab fa-tiktok"></i>
                        </a>
                        <a href="https://www.instagram.com/nusamedianews" class="bg-pink-600 p-2 rounded hover:bg-pink-700 transition mb-2">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="http://www.youtube.com/@nusamedia_official" class="bg-red-600 p-2 rounded hover:bg-red-700 transition mb-2">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://whatsapp.com/channel/0029VaF0zOM7YSd97pyFpV1d" class="bg-green-600 p-2 rounded hover:bg-green-700 transition mb-2">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="#" class="bg-blue-400 p-2 rounded hover:bg-blue-500 transition mb-2">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="bg-purple-600 p-2 rounded hover:bg-purple-700 transition mb-2">
                            <i class="fab fa-threads"></i>
                        </a>
                        <a href="#" class="bg-orange-600 p-2 rounded hover:bg-orange-700 transition mb-2">
                            <i class="fas fa-video"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">Kategori</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="#" onclick="filterByCategory('Umum')" class="hover:text-white transition">Umum</a></li>
                        <li><a href="#" onclick="filterByCategory('Politik')" class="hover:text-white transition">Politik</a></li>
                        <li><a href="#" onclick="filterByCategory('Ekonomi')" class="hover:text-white transition">Ekonomi</a></li>
                        <li><a href="#" onclick="filterByCategory('Olahraga')" class="hover:text-white transition">Olahraga</a></li>
                        <li><a href="#" onclick="filterByCategory('Teknologi')" class="hover:text-white transition">Teknologi</a></li>
                        <li><a href="#" onclick="filterByCategory('Hiburan')" class="hover:text-white transition">Hiburan</a></li>
                        <li><a href="#" onclick="filterByCategory('Pendidikan')" class="hover:text-white transition">Pendidikan</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">Layanan</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="#" class="hover:text-white transition">Tentang Kami</a></li>
                        <li><a href="#" class="hover:text-white transition">Box Redaksi</a></li>
                        <li><a href="#" class="hover:text-white transition">Kontak Kami</a></li>
                        <li><a href="#" class="hover:text-white transition">Pedoman Cyber</a></li>
                        <li><a href="#" class="hover:text-white transition">SOP Perlindungan Profesi Wartawan</a></li>
                        <li><a href="#" class="hover:text-white transition">Kode Etik Jurnalistik</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">Kontak</h4>
                    <div class="space-y-2 text-sm text-gray-400">
                        <p><i class="fas fa-map-marker-alt mr-2"></i>Medan, Indonesia</p>
                        <p><i class="fas fa-phone mr-2"></i>+62 888-0715-0608</p>
                        <p><i class="fas fa-envelope mr-2"></i>redaksi.nusamedia@gmail.com</p>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-sm text-gray-400">
                <p>&copy; 2024 Nusa Media. Hak Cipta Dilindungi. | <a href="#" class="hover:text-white">Kebijakan Privasi</a> | <a href="#" class="hover:text-white">Syarat & Ketentuan</a></p>
            </div>
        </div>
    </footer>

    <script>
        // Global variables
        let isLoggedIn = false;
        let newsData = [];
        let currentEditingId = null;
        let selectedImages = [];
        let currentCategory = 'all';

        // Initialize with sample data if no data exists
        function initializeNewsData() {
            const sampleNews = [
                {
                    id: 1703347200000,
                    category: 'Politik',
                    title: 'Presiden Jokowi Resmikan Infrastruktur Baru di Jakarta',
                    content: 'Jakarta - Presiden Joko Widodo meresmikan pembangunan infrastruktur baru yang akan meningkatkan konektivitas di wilayah Jakarta dan sekitarnya. Proyek ini diharapkan dapat mengurangi kemacetan dan meningkatkan perekonomian daerah.\n\nDalam sambutannya, Presiden menekankan pentingnya pembangunan infrastruktur yang berkelanjutan dan ramah lingkungan. "Kita harus memastikan bahwa setiap pembangunan yang kita lakukan memberikan manfaat jangka panjang bagi masyarakat," ujar Presiden.\n\nProyek ini melibatkan investasi sebesar Rp 15 triliun dan diperkirakan akan selesai dalam waktu 3 tahun ke depan.',
                    status: 'published',
                    images: [],
                    timestamp: new Date('2024-12-23T10:00:00'),
                    views: 1250,
                    likes: 89,
                    comments: []
                },
                {
                    id: 1703260800000,
                    category: 'Ekonomi',
                    title: 'Bank Indonesia Pertahankan Suku Bunga Acuan 6%',
                    content: 'Jakarta - Bank Indonesia (BI) memutuskan untuk mempertahankan suku bunga acuan BI Rate pada level 6,00%. Keputusan ini diambil dalam Rapat Dewan Gubernur (RDG) BI pada 21-22 Desember 2024.\n\nGubernur BI Perry Warjiyo menjelaskan bahwa keputusan ini konsisten dengan upaya menjaga stabilitas nilai tukar Rupiah dan mengendalikan inflasi. "Kami optimis inflasi akan tetap terkendali dalam kisaran target 2,5Â±1% pada 2025," kata Perry.\n\nKeputusan ini juga didukung oleh kondisi ekonomi global yang masih penuh ketidakpastian dan perlunya menjaga daya saing investasi di Indonesia.',
                    status: 'published',
                    images: [],
                    timestamp: new Date('2024-12-22T14:30:00'),
                    views: 980,
                    likes: 67,
                    comments: []
                },
                {
                    id: 1703174400000,
                    category: 'Olahraga',
                    title: 'Timnas Indonesia Lolos ke Piala Asia 2027',
                    content: 'Jakarta - Timnas Indonesia berhasil meraih tiket ke Piala Asia 2027 setelah mengalahkan Thailand dengan skor 2-1 dalam laga kualifikasi yang berlangsung di Stadion Gelora Bung Karno.\n\nGol kemenangan Indonesia dicetak oleh Egy Maulana Vikri pada menit ke-78 setelah sebelumnya Marselino Ferdinan menyamakan kedudukan di menit ke-65. Thailand sempat unggul lebih dulu melalui gol Supachok Sarachart di menit ke-23.\n\nPelatih Shin Tae-yong mengapresiasi perjuangan para pemain. "Ini adalah hasil kerja keras seluruh tim. Kami akan terus bersiap untuk tampil maksimal di Piala Asia nanti," ujar pelatih asal Korea Selatan itu.',
                    status: 'published',
                    images: [],
                    timestamp: new Date('2024-12-21T20:15:00'),
                    views: 2150,
                    likes: 156,
                    comments: []
                },
                {
                    id: 1703088000000,
                    category: 'Teknologi',
                    title: 'Indonesia Luncurkan Satelit Komunikasi Terbaru',
                    content: 'Jakarta - Indonesia berhasil meluncurkan satelit komunikasi terbaru bernama Nusantara Satu-B yang akan meningkatkan konektivitas internet di seluruh nusantara, terutama di daerah terpencil.\n\nSatelit ini diluncurkan menggunakan roket SpaceX Falcon 9 dari Kennedy Space Center, Florida, Amerika Serikat. Menteri Komunikasi dan Informatika menyatakan bahwa satelit ini akan memberikan akses internet berkecepatan tinggi hingga ke pelosok Indonesia.\n\n"Dengan adanya satelit ini, kami optimis dapat mengurangi kesenjangan digital antara daerah perkotaan dan pedesaan," kata Menkominfo dalam konferensi pers.',
                    status: 'published',
                    images: [],
                    timestamp: new Date('2024-12-20T16:45:00'),
                    views: 1680,
                    likes: 124,
                    comments: []
                },
                {
                    id: 1703001600000,
                    category: 'Hiburan',
                    title: 'Festival Film Indonesia 2024 Digelar Meriah',
                    content: 'Jakarta - Festival Film Indonesia (FFI) 2024 digelar dengan meriah di Jakarta Convention Center. Acara yang berlangsung selama tiga hari ini menampilkan berbagai film terbaik Indonesia sepanjang tahun 2024.\n\nFilm "Laskar Pelangi: The Next Generation" berhasil meraih penghargaan Film Terbaik, sementara Reza Rahadian dinobatkan sebagai Aktor Terbaik untuk perannya dalam film "Bumi Manusia: Epilog".\n\nKetua Panitia FFI 2024 menyatakan antusiasme masyarakat terhadap perfilman Indonesia semakin meningkat. "Ini menunjukkan bahwa industri film Indonesia terus berkembang dan mendapat apresiasi yang tinggi," ujarnya.',
                    status: 'published',
                    images: [],
                    timestamp: new Date('2024-12-19T19:30:00'),
                    views: 1420,
                    likes: 98,
                    comments: []
                },
                {
                    id: 1702915200000,
                    category: 'Pendidikan',
                    title: 'Kurikulum Merdeka Diterapkan di Seluruh Indonesia',
                    content: 'Jakarta - Kementerian Pendidikan, Kebudayaan, Riset, dan Teknologi (Kemendikbudristek) mengumumkan bahwa Kurikulum Merdeka akan diterapkan secara menyeluruh di seluruh Indonesia mulai tahun ajaran 2025/2026.\n\nMenteri Pendidikan menyatakan bahwa kurikulum ini memberikan fleksibilitas lebih besar kepada sekolah dan guru dalam mengembangkan pembelajaran yang sesuai dengan karakteristik siswa dan daerah masing-masing.\n\n"Kurikulum Merdeka dirancang untuk mengembangkan karakter dan kompetensi siswa secara holistik, tidak hanya fokus pada aspek akademik tetapi juga soft skills," jelas Mendikbudristek dalam keterangan resminya.',
                    status: 'published',
                    images: [],
                    timestamp: new Date('2024-12-18T11:20:00'),
                    views: 1890,
                    likes: 145,
                    comments: []
                }
            ];

            // Check if there's existing data
            const existingData = localStorage.getItem('nusamediaNews');
            if (!existingData || JSON.parse(existingData).length === 0) {
                newsData = sampleNews;
                localStorage.setItem('nusamediaNews', JSON.stringify(newsData));
            } else {
                newsData = JSON.parse(existingData);
            }
        }

        // Save data to localStorage
        function saveNewsData() {
            localStorage.setItem('nusamediaNews', JSON.stringify(newsData));
        }

        // Authentication
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const adminControls = document.getElementById('adminControls');
        const loginModal = document.getElementById('loginModal');
        const loginForm = document.getElementById('loginForm');

        loginBtn.addEventListener('click', () => {
            loginModal.classList.add('active');
        });

        logoutBtn.addEventListener('click', () => {
            isLoggedIn = false;
            loginBtn.style.display = 'block';
            adminControls.classList.remove('show');
            hideAdminControls();
            showNotification('Logout berhasil!', 'success');
        });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username === 'nusamedia-news' && password === 'nusamedia-oke') {
                isLoggedIn = true;
                loginBtn.style.display = 'none';
                adminControls.classList.add('show');
                loginModal.classList.remove('active');
                showAdminControls();
                showNotification('Login berhasil! Selamat datang Administrator.', 'success');
                loginForm.reset();
            } else {
                showNotification('Username atau password salah!', 'error');
            }
        });

        // Close modals
        document.getElementById('closeLoginModal').addEventListener('click', () => {
            loginModal.classList.remove('active');
        });

        document.getElementById('closeNewsModal').addEventListener('click', () => {
            document.getElementById('newsModal').classList.remove('active');
            resetNewsForm();
        });

        // News management
        const addNewsBtn = document.getElementById('addNewsBtn');
        const newsModal = document.getElementById('newsModal');
        const newsForm = document.getElementById('newsForm');

        addNewsBtn.addEventListener('click', () => {
            currentEditingId = null;
            document.getElementById('modalTitle').textContent = 'Tambah Berita Baru';
            resetNewsForm();
            newsModal.classList.add('active');
        });

        // Image upload functionality
        const imageUpload = document.getElementById('imageUpload');
        const imageInput = document.getElementById('imageInput');
        const imagePreview = document.getElementById('imagePreview');
        const imageActions = document.getElementById('imageActions');
        const imageCount = document.getElementById('imageCount');

        imageUpload.addEventListener('click', () => imageInput.click());
        imageUpload.addEventListener('dragover', (e) => {
            e.preventDefault();
            imageUpload.classList.add('drag-over');
        });
        imageUpload.addEventListener('dragleave', () => {
            imageUpload.classList.remove('drag-over');
        });
        imageUpload.addEventListener('drop', (e) => {
            e.preventDefault();
            imageUpload.classList.remove('drag-over');
            handleFiles(e.dataTransfer.files);
        });

        imageInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });

        document.getElementById('addMoreImages').addEventListener('click', () => {
            imageInput.click();
        });

        document.getElementById('clearAllImages').addEventListener('click', () => {
            selectedImages = [];
            updateImagePreview();
        });

        function handleFiles(files) {
            Array.from(files).forEach(file => {
                const isImage = file.type.startsWith('image/');
                const isVideo = file.type.startsWith('video/');
                const maxSize = isVideo ? 50 * 1024 * 1024 : 10 * 1024 * 1024; // 50MB for video, 10MB for image
                
                if ((isImage || isVideo) && file.size <= maxSize) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        selectedImages.push({
                            file: file,
                            url: e.target.result,
                            name: file.name,
                            type: isVideo ? 'video' : 'image'
                        });
                        updateImagePreview();
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function updateImagePreview() {
            if (selectedImages.length === 0) {
                imagePreview.classList.add('hidden');
                imageActions.classList.add('hidden');
                return;
            }

            imagePreview.classList.remove('hidden');
            imageActions.classList.remove('hidden');
            
            imagePreview.innerHTML = selectedImages.map((media, index) => `
                <div class="image-preview relative">
                    ${media.type === 'video' ? `
                        <video src="${media.url}" class="w-full h-24 object-cover rounded-lg" controls>
                            <source src="${media.url}" type="${media.file.type}">
                        </video>
                        <div class="absolute top-1 left-1 bg-red-600 text-white text-xs px-2 py-1 rounded">
                            <i class="fas fa-play"></i> VIDEO
                        </div>
                    ` : `
                        <img src="${media.url}" alt="${media.name}" class="w-full h-24 object-cover rounded-lg">
                        <div class="absolute top-1 left-1 bg-blue-600 text-white text-xs px-2 py-1 rounded">
                            <i class="fas fa-image"></i> IMG
                        </div>
                    `}
                    <div class="absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded">
                        ${index + 1}
                    </div>
                    <button type="button" class="delete-btn absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full hover:bg-red-600 transition" onclick="removeImage(${index})">
                        <i class="fas fa-trash text-xs"></i>
                    </button>
                </div>
            `).join('');

            const imageCount_val = selectedImages.filter(m => m.type === 'image').length;
            const videoCount = selectedImages.filter(m => m.type === 'video').length;
            imageCount.textContent = `${imageCount_val} gambar, ${videoCount} video dipilih`;
        }

        function removeImage(index) {
            selectedImages.splice(index, 1);
            updateImagePreview();
        }

        // Character counter
        const newsContent = document.getElementById('newsContent');
        const charCount = document.getElementById('charCount');

        newsContent.addEventListener('input', () => {
            const count = newsContent.value.length;
            charCount.textContent = `${count} karakter`;
            charCount.className = 'text-sm text-gray-500';
        });

        // Form submission
        newsForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const formData = {
                id: currentEditingId || Date.now(),
                category: document.getElementById('newsCategory').value,
                title: document.getElementById('newsTitle').value,
                content: document.getElementById('newsContent').value,
                status: document.getElementById('newsStatus').value,
                images: selectedImages,
                timestamp: new Date(),
                views: 0,
                likes: 0,
                comments: []
            };

            if (currentEditingId) {
                const index = newsData.findIndex(news => news.id === currentEditingId);
                newsData[index] = formData;
                showNotification('Berita berhasil diperbarui!', 'success');
            } else {
                newsData.unshift(formData);
                showNotification('Berita berhasil dipublikasikan!', 'success');
            }

            saveNewsData();
            renderNews();
            updateTrending();
            newsModal.classList.remove('active');
            resetNewsForm();
        });

        // Reset form
        function resetNewsForm() {
            newsForm.reset();
            selectedImages = [];
            updateImagePreview();
            charCount.textContent = '0 karakter';
            charCount.className = 'text-sm text-gray-500';
            currentEditingId = null;
        }

        // Render news
        function renderNews() {
            const allNewsContainer = document.getElementById('allNews');
            const sectionTitle = document.getElementById('sectionTitle');
            
            // Filter news based on current category
            let filteredNews = currentCategory === 'all' ? newsData : newsData.filter(news => news.category === currentCategory);
            
            // Update section title
            sectionTitle.textContent = currentCategory === 'all' ? 'Semua Berita' : `Berita ${currentCategory}`;
            
            if (filteredNews.length === 0) {
                allNewsContainer.innerHTML = `
                    <div class="col-span-3 text-center py-12">
                        <i class="fas fa-newspaper text-6xl text-gray-300 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-600 mb-2">Belum Ada Berita</h3>
                        <p class="text-gray-500">${currentCategory === 'all' ? 'Belum ada berita yang dipublikasikan' : `Belum ada berita untuk kategori ${currentCategory}`}</p>
                    </div>
                `;
                return;
            }

            allNewsContainer.innerHTML = filteredNews.map((news, index) => {
                const timeAgo = getTimeAgo(news.timestamp);
                const imageCount = news.images.length;
                
                return `
                    <article class="bg-white rounded-lg shadow-lg overflow-hidden news-card relative group aspect-square flex flex-col">
                        ${isLoggedIn ? `
                            <div class="absolute top-4 right-4 z-10 space-x-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button class="edit-btn bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600 transition" onclick="editNews(${news.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-btn bg-red-500 text-white p-2 rounded hover:bg-red-600 transition" onclick="deleteNews(${news.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        ` : ''}
                        <div class="relative flex-1">
                            ${news.images.length > 0 ? `
                                ${news.images[0].type === 'video' ? `
                                    <video src="${news.images[0].url}" class="w-full h-full object-cover" controls>
                                        <source src="${news.images[0].url}" type="${news.images[0].file?.type || 'video/mp4'}">
                                    </video>
                                ` : `
                                    <img src="${news.images[0].url}" alt="${news.title}" class="w-full h-full object-cover">
                                `}
                                ${imageCount > 1 ? `
                                    <div class="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-xs">
                                        <i class="fas fa-images"></i> ${imageCount}
                                    </div>
                                ` : ''}
                            ` : `
                                <div class="h-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center">
                                    <i class="fas fa-image text-white text-4xl opacity-50"></i>
                                </div>
                            `}
                            <span class="absolute top-3 left-3 bg-${getCategoryColor(news.category)}-600 text-white px-2 py-1 rounded text-xs font-medium">${news.category.toUpperCase()}</span>
                            ${timeAgo === 'Baru saja' ? '<span class="absolute top-3 right-3 bg-green-600 text-white px-2 py-1 rounded text-xs font-medium animate-pulse">BARU</span>' : ''}
                        </div>
                        <div class="p-4 flex flex-col justify-between flex-shrink-0" style="min-height: 140px;">
                            <div>
                                <h2 class="text-sm font-bold text-gray-900 mb-2 hover:text-blue-600 cursor-pointer line-clamp-2" onclick="openNewsDetail(${news.id})">
                                    ${news.title}
                                </h2>
                                <p class="text-gray-600 text-xs mb-3 line-clamp-2">${news.content.substring(0, 80)}...</p>
                            </div>
                            <div class="flex items-center justify-between text-xs text-gray-500">
                                <span><i class="far fa-clock"></i> ${timeAgo}</span>
                                <div class="flex items-center space-x-2">
                                    <span><i class="far fa-eye"></i> ${news.views}</span>
                                    <span><i class="far fa-heart"></i> ${news.likes}</span>
                                </div>
                            </div>
                        </div>
                    </article>
                `;
            }).join('');
        }

        // Filter news by category
        function filterByCategory(category) {
            currentCategory = category;
            
            // Update navigation active state
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-blue-600', 'border-b-2', 'border-blue-600');
                link.classList.add('text-gray-700');
            });
            
            event.target.classList.remove('text-gray-700');
            event.target.classList.add('text-blue-600', 'border-b-2', 'border-blue-600');
            
            renderNews();
            
            // Scroll to news section
            document.getElementById('allNewsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Edit news
        function editNews(id) {
            const news = newsData.find(n => n.id === id);
            if (!news) return;

            currentEditingId = id;
            document.getElementById('modalTitle').textContent = 'Edit Berita';
            document.getElementById('newsCategory').value = news.category;
            document.getElementById('newsTitle').value = news.title;
            document.getElementById('newsContent').value = news.content;
            document.getElementById('newsStatus').value = news.status;
            
            selectedImages = [...news.images];
            updateImagePreview();
            
            const count = news.content.length;
            charCount.textContent = `${count} karakter`;
            charCount.className = 'text-sm text-gray-500';
            
            newsModal.classList.add('active');
        }

        // Delete news
        let deleteNewsId = null;
        const deleteModal = document.getElementById('deleteModal');

        function deleteNews(id) {
            deleteNewsId = id;
            deleteModal.classList.add('active');
        }

        document.getElementById('cancelDelete').addEventListener('click', () => {
            deleteModal.classList.remove('active');
            deleteNewsId = null;
        });

        document.getElementById('confirmDelete').addEventListener('click', () => {
            if (deleteNewsId) {
                newsData = newsData.filter(news => news.id !== deleteNewsId);
                saveNewsData();
                renderNews();
                updateTrending();
                showNotification('Berita berhasil dihapus!', 'success');
                deleteModal.classList.remove('active');
                deleteNewsId = null;
            }
        });

        // News detail modal
        function openNewsDetail(id) {
            const news = newsData.find(n => n.id === id);
            if (!news) return;

            // Increment view count
            news.views++;
            saveNewsData();
            renderNews();
            updateTrending();

            const modal = document.getElementById('newsDetailModal');
            const content = document.getElementById('newsDetailContent');
            
            content.innerHTML = `
                <div class="p-8">
                    <div class="flex justify-between items-start mb-6">
                        <div class="flex-1">
                            <span class="bg-${getCategoryColor(news.category)}-600 text-white px-3 py-1 rounded text-sm font-medium">${news.category}</span>
                            <h1 class="text-3xl font-bold text-gray-900 mt-4 mb-4">${news.title}</h1>
                            <div class="flex items-center text-sm text-gray-500 space-x-4">
                                <span><i class="far fa-clock"></i> ${getTimeAgo(news.timestamp)}</span>
                                <span><i class="far fa-user"></i> Admin Redaksi</span>
                                <span><i class="far fa-eye"></i> ${news.views} views</span>
                            </div>
                        </div>
                        <button onclick="closeNewsDetail()" class="text-gray-500 hover:text-gray-700 ml-4">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>
                    
                    ${news.images.length > 0 ? `
                        <div class="mb-6">
                            ${news.images.length === 1 ? `
                                ${news.images[0].type === 'video' ? `
                                    <video src="${news.images[0].url}" class="w-full h-96 object-cover rounded-lg" controls>
                                        <source src="${news.images[0].url}" type="${news.images[0].file?.type || 'video/mp4'}">
                                    </video>
                                ` : `
                                    <img src="${news.images[0].url}" alt="${news.title}" class="w-full h-96 object-cover rounded-lg">
                                `}
                            ` : `
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                    ${news.images.map(media => `
                                        ${media.type === 'video' ? `
                                            <video src="${media.url}" class="w-full h-48 object-cover rounded-lg cursor-pointer hover:opacity-80 transition" controls>
                                                <source src="${media.url}" type="${media.file?.type || 'video/mp4'}">
                                            </video>
                                        ` : `
                                            <img src="${media.url}" alt="${news.title}" class="w-full h-48 object-cover rounded-lg cursor-pointer hover:opacity-80 transition">
                                        `}
                                    `).join('')}
                                </div>
                            `}
                        </div>
                    ` : ''}
                    
                    <div class="prose max-w-none mb-8">
                        <p class="text-gray-700 leading-relaxed whitespace-pre-line">${news.content}</p>
                    </div>
                    
                    <div class="border-t pt-6">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center space-x-4">
                                <button onclick="likeNews(${news.id})" class="flex items-center space-x-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition">
                                    <i class="far fa-heart"></i>
                                    <span>${news.likes} Suka</span>
                                </button>
                                <div class="flex items-center space-x-2">
                                    <span class="text-gray-600">Bagikan:</span>
                                    <button onclick="shareNews('facebook', ${news.id})" class="p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
                                        <i class="fab fa-facebook"></i>
                                    </button>
                                    <button onclick="shareNews('twitter', ${news.id})" class="p-2 bg-blue-400 text-white rounded hover:bg-blue-500 transition">
                                        <i class="fab fa-twitter"></i>
                                    </button>
                                    <button onclick="shareNews('whatsapp', ${news.id})" class="p-2 bg-green-600 text-white rounded hover:bg-green-700 transition">
                                        <i class="fab fa-whatsapp"></i>
                                    </button>
                                    <button onclick="copyLink(${news.id})" class="p-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition">
                                        <i class="fas fa-link"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h3 class="text-lg font-bold text-gray-900 mb-4">Komentar (${news.comments.length})</h3>
                            
                            <form onsubmit="addComment(event, ${news.id})" class="mb-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <input type="text" placeholder="Nama Anda" class="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                                    <input type="email" placeholder="Email (opsional)" class="px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <textarea placeholder="Tulis komentar Anda..." rows="3" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4" required></textarea>
                                <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                                    <i class="fas fa-paper-plane mr-2"></i>Kirim Komentar
                                </button>
                            </form>
                            
                            <div class="space-y-4">
                                ${news.comments.map(comment => `
                                    <div class="bg-white p-4 rounded-lg">
                                        <div class="flex items-center justify-between mb-2">
                                            <h4 class="font-semibold text-gray-900">${comment.name}</h4>
                                            <span class="text-sm text-gray-500">${getTimeAgo(comment.timestamp)}</span>
                                        </div>
                                        <p class="text-gray-700">${comment.message}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.add('active');
        }

        function closeNewsDetail() {
            document.getElementById('newsDetailModal').classList.remove('active');
        }

        // Update trending section
        function updateTrending() {
            const trendingContainer = document.querySelector('.space-y-3');
            if (!trendingContainer) return;
            
            // Sort news by views + likes for trending
            const trendingNews = [...newsData]
                .sort((a, b) => (b.views + b.likes) - (a.views + a.likes))
                .slice(0, 3);
            
            if (trendingNews.length === 0) {
                trendingContainer.innerHTML = `
                    <div class="text-center py-4">
                        <p class="text-sm text-gray-500">Belum ada berita trending</p>
                    </div>
                `;
                return;
            }
            
            trendingContainer.innerHTML = trendingNews.map((news, index) => `
                <div class="flex items-start space-x-3">
                    <span class="bg-${index === 0 ? 'red' : index === 1 ? 'orange' : 'yellow'}-600 text-white text-xs font-bold px-2 py-1 rounded">${index + 1}</span>
                    <div>
                        <h4 class="text-sm font-semibold text-gray-900 hover:text-blue-600 cursor-pointer" onclick="openNewsDetail(${news.id})">
                            ${news.title}
                        </h4>
                        <span class="text-xs text-gray-500">${news.views + news.likes} interaksi</span>
                    </div>
                </div>
            `).join('');
        }

        // Like news
        function likeNews(id) {
            const news = newsData.find(n => n.id === id);
            if (news) {
                news.likes++;
                saveNewsData();
                renderNews();
                updateTrending();
                openNewsDetail(id); // Refresh detail modal
                showNotification('Terima kasih atas dukungan Anda!', 'success');
            }
        }

        // Share news
        function shareNews(platform, id) {
            const news = newsData.find(n => n.id === id);
            if (!news) return;

            const url = window.location.href;
            const text = news.title;

            switch(platform) {
                case 'facebook':
                    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
                    break;
                case 'twitter':
                    window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
                    break;
                case 'whatsapp':
                    window.open(`https://wa.me/?text=${text} ${url}`, '_blank');
                    break;
            }
        }

        function copyLink(id) {
            navigator.clipboard.writeText(window.location.href).then(() => {
                showNotification('Link berhasil disalin!', 'success');
            });
        }

        // Add comment
        function addComment(event, id) {
            event.preventDefault();
            const form = event.target;
            const name = form.querySelector('input[placeholder="Nama Anda"]').value;
            const email = form.querySelector('input[placeholder="Email (opsional)"]').value;
            const message = form.querySelector('textarea').value;

            const news = newsData.find(n => n.id === id);
            if (news) {
                news.comments.push({
                    name: name,
                    email: email,
                    message: message,
                    timestamp: new Date()
                });
                
                saveNewsData();
                form.reset();
                openNewsDetail(id); // Refresh detail modal
                showNotification('Komentar berhasil ditambahkan!', 'success');
            }
        }

        // Utility functions
        function getTimeAgo(timestamp) {
            const now = new Date();
            const diff = now - new Date(timestamp);
            const minutes = Math.floor(diff / 60000);
            
            if (minutes < 1) return 'Baru saja';
            if (minutes < 60) return `${minutes} menit lalu`;
            
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours} jam lalu`;
            
            const days = Math.floor(hours / 24);
            return `${days} hari lalu`;
        }

        function getCategoryColor(category) {
            const colors = {
                'Umum': 'gray',
                'Politik': 'red',
                'Ekonomi': 'blue',
                'Olahraga': 'orange',
                'Teknologi': 'purple',
                'Hiburan': 'pink',
                'Pendidikan': 'yellow'
            };
            return colors[category] || 'gray';
        }

        function showAdminControls() {
            document.querySelectorAll('.admin-controls').forEach(el => {
                el.classList.add('show');
            });
        }

        function hideAdminControls() {
            document.querySelectorAll('.admin-controls').forEach(el => {
                el.classList.remove('show');
            });
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-medium transform translate-x-full transition-transform duration-300 ${
                type === 'success' ? 'bg-green-600' : 
                type === 'error' ? 'bg-red-600' : 'bg-blue-600'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Search functionality
        const searchInput = document.querySelector('input[placeholder="Cari berita..."]');
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const query = this.value.toLowerCase();
                if (query) {
                    const results = newsData.filter(news => 
                        news.title.toLowerCase().includes(query) || 
                        news.content.toLowerCase().includes(query)
                    );
                    showNotification(`Ditemukan ${results.length} berita untuk "${query}"`, 'info');
                }
                this.value = '';
            }
        });

        // Newsletter subscription
        const newsletterForm = document.querySelector('form');
        newsletterForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const email = this.querySelector('input[type="email"]').value;
            if (email) {
                showNotification('Terima kasih! Anda telah berlangganan newsletter.', 'success');
                this.reset();
            }
        });

        // Article click handlers for existing news
        document.querySelectorAll('.news-card h3').forEach(headline => {
            headline.addEventListener('click', function() {
                showNotification('Membuka artikel: "' + this.textContent.trim() + '"', 'info');
            });
        });

        // Like functionality for existing news
        document.querySelectorAll('.like-count').forEach(likeBtn => {
            likeBtn.addEventListener('click', function() {
                const currentCount = parseInt(this.textContent.match(/\d+/)[0]);
                this.innerHTML = `<i class="far fa-heart"></i> ${currentCount + 1}`;
                showNotification('Terima kasih atas dukungan Anda!', 'success');
            });
        });

        // Edit/Delete buttons for existing news (only show when admin is logged in)
        document.querySelectorAll('.edit-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (isLoggedIn) {
                    showNotification('Fitur edit untuk berita existing akan segera tersedia!', 'info');
                }
            });
        });

        document.querySelectorAll('.delete-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (isLoggedIn) {
                    if (confirm('Apakah Anda yakin ingin menghapus berita ini?')) {
                        this.closest('.news-card').remove();
                        showNotification('Berita berhasil dihapus!', 'success');
                    }
                }
            });
        });

        // Dynamic time update
        function updateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            const dateString = now.toLocaleDateString('id-ID', options);
            const timeElement = document.querySelector('.fa-calendar').parentElement;
            timeElement.innerHTML = '<i class="far fa-calendar"></i> ' + dateString;
        }
        
        updateTime();
        setInterval(updateTime, 60000);

        // Reading progress indicator
        window.addEventListener('scroll', function() {
            const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
            if (!document.querySelector('.progress-bar')) {
                const progressBar = document.createElement('div');
                progressBar.className = 'progress-bar';
                progressBar.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    height: 3px;
                    background: linear-gradient(90deg, #667eea, #764ba2);
                    z-index: 9999;
                    transition: width 0.3s ease;
                `;
                document.body.appendChild(progressBar);
            }
            document.querySelector('.progress-bar').style.width = scrolled + '%';
        });

        // Initialize
        initializeNewsData();
        hideAdminControls();
        renderNews();
        updateTrending();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95bfdde42166600d',t:'MTc1MTk4MDY5OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
